'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'

type Region = {
  id: string
  name: string
  path: string
  available: boolean
  url?: string
}

export default function SpainMap() {
  const router = useRouter()
  const [hoveredRegion, setHoveredRegion] = useState<Region | null>(null)

  const regions: Region[] = [
    {
      id: 'madrid',
      name: 'Madrid',
      path: 'M416.278 280.43L405.443 291.265H335.304L334.712 290.638L321.614 276.77H297.848L298.86 274.068L303.692 261.183L303.838 260.795L304.126 260.497L371.771 190.436L372.36 189.826H386.729L387.186 191.193L393.628 210.52L393.859 211.215L393.588 211.895L387.635 226.777L406.029 245.171L406.232 245.375L406.371 245.628L416.034 263.343L416.278 263.792V280.43Z',
      available: true,
      url: '/madrid'
    },
    {
      id: 'cataluna',
      name: 'Cataluña',
      path: 'M642.535 68.2612L690.852 77.1186L692.015 77.3325L692.389 78.4536L700.038 101.403L768.139 109.231L797.344 91.0776L798.386 90.4301L799.435 91.0649L830.035 109.586L832.803 111.261L830.068 112.989L816.942 121.278L830.375 134.004L831.979 135.524L830.308 136.969L765.08 193.339L764.709 193.66L764.231 193.772L679.515 213.752L669.826 225.258H679.854L680.31 226.625L685.141 241.121L685.744 242.93L683.966 243.619L659.002 253.282L658.013 253.664L657.142 253.061L636.204 238.566L635.493 238.074L635.364 237.218L630.533 205.007L630.487 204.703L630.535 204.399L635.287 174.298L630.625 161.085L630.132 159.689L631.324 158.81L645.923 148.052L652.142 93.6391L636.084 80.6411L634.788 79.5922L635.587 78.1284L640.418 69.27L641.111 67.9995L642.535 68.2612Z',
      available: true,
      url: 'https://selectivi.cat'
    },
    {
      id: 'galicia',
      name: 'Galicia',
      path: 'M71.5 120.5L80 115.5L89.5 106L96 99L102.5 94L109.5 91L116 89.5L122 89.5L127.5 91L132 94L136 98.5L139 103.5L141 109L142 115L142 121L141 127L139 132.5L136 137.5L132 142L127.5 145.5L122 148L116 149.5L109.5 150L102.5 149.5L96 148L89.5 145.5L84 142L79 137.5L75 132.5L72.5 127L71.5 120.5Z',
      available: false
    },
    {
      id: 'asturias',
      name: 'Asturias',
      path: 'M142 89.5L150 88L158.5 87.5L167 88L175 89.5L182.5 92L189 95.5L194.5 100L199 105.5L202 111.5L204 118L204.5 124.5L204 131L202 137L199 142.5L194.5 147L189 150.5L182.5 153L175 154.5L167 155L158.5 154.5L150 153L142 150.5L135 147L129 142.5L124.5 137L121.5 131L120 124.5L120.5 118L122 111.5L125 105.5L129 100L135 95.5L142 92L142 89.5Z',
      available: false
    },
    {
      id: 'cantabria',
      name: 'Cantabria',
      path: 'M204.5 124.5L213 123L222 122.5L231 123L239.5 124.5L247.5 127L254.5 130.5L260.5 135L265.5 140.5L269 146.5L271 153L271.5 159.5L271 166L269 172L265.5 177.5L260.5 182L254.5 185.5L247.5 188L239.5 189.5L231 190L222 189.5L213 188L204.5 185.5L197.5 182L192 177.5L188 172L186 166L185.5 159.5L186 153L188 146.5L192 140.5L197.5 135L204.5 130.5L204.5 124.5Z',
      available: false
    },
    {
      id: 'paisvasco',
      name: 'País Vasco',
      path: 'M271.5 159.5L280 158L289 157.5L298 158L306.5 159.5L314.5 162L321.5 165.5L327.5 170L332.5 175.5L336 181.5L338 188L338.5 194.5L338 201L336 207L332.5 212.5L327.5 217L321.5 220.5L314.5 223L306.5 224.5L298 225L289 224.5L280 223L271.5 220.5L264.5 217L259 212.5L255 207L253 201L252.5 194.5L253 188L255 181.5L259 175.5L264.5 170L271.5 165.5L271.5 159.5Z',
      available: false
    },
    {
      id: 'navarra',
      name: 'Navarra',
      path: 'M338.5 194.5L347 193L356 192.5L365 193L373.5 194.5L381.5 197L388.5 200.5L394.5 205L399.5 210.5L403 216.5L405 223L405.5 229.5L405 236L403 242L399.5 247.5L394.5 252L388.5 255.5L381.5 258L373.5 259.5L365 260L356 259.5L347 258L338.5 255.5L331.5 252L326 247.5L322 242L320 236L319.5 229.5L320 223L322 216.5L326 210.5L331.5 205L338.5 200.5L338.5 194.5Z',
      available: false
    },
    {
      id: 'larioja',
      name: 'La Rioja',
      path: 'M405.5 229.5L414 228L423 227.5L432 228L440.5 229.5L448.5 232L455.5 235.5L461.5 240L466.5 245.5L470 251.5L472 258L472.5 264.5L472 271L470 277L466.5 282.5L461.5 287L455.5 290.5L448.5 293L440.5 294.5L432 295L423 294.5L414 293L405.5 290.5L398.5 287L393 282.5L389 277L387 271L386.5 264.5L387 258L389 251.5L393 245.5L398.5 240L405.5 235.5L405.5 229.5Z',
      available: false
    },
    {
      id: 'aragon',
      name: 'Aragón',
      path: 'M472.5 264.5L481 263L490 262.5L499 263L507.5 264.5L515.5 267L522.5 270.5L528.5 275L533.5 280.5L537 286.5L539 293L539.5 299.5L539 306L537 312L533.5 317.5L528.5 322L522.5 325.5L515.5 328L507.5 329.5L499 330L490 329.5L481 328L472.5 325.5L465.5 322L460 317.5L456 312L454 306L453.5 299.5L454 293L456 286.5L460 280.5L465.5 275L472.5 270.5L472.5 264.5Z',
      available: false
    },
    {
      id: 'castillaleon',
      name: 'Castilla y León',
      path: 'M539.5 299.5L548 298L557 297.5L566 298L574.5 299.5L582.5 302L589.5 305.5L595.5 310L600.5 315.5L604 321.5L606 328L606.5 334.5L606 341L604 347L600.5 352.5L595.5 357L589.5 360.5L582.5 363L574.5 364.5L566 365L557 364.5L548 363L539.5 360.5L532.5 357L527 352.5L523 347L521 341L520.5 334.5L521 328L523 321.5L527 315.5L532.5 310L539.5 305.5L539.5 299.5Z',
      available: false
    },
    {
      id: 'castillalamancha',
      name: 'Castilla-La Mancha',
      path: 'M606.5 334.5L615 333L624 332.5L633 333L641.5 334.5L649.5 337L656.5 340.5L662.5 345L667.5 350.5L671 356.5L673 363L673.5 369.5L673 376L671 382L667.5 387.5L662.5 392L656.5 395.5L649.5 398L641.5 399.5L633 400L624 399.5L615 398L606.5 395.5L599.5 392L594 387.5L590 382L588 376L587.5 369.5L588 363L590 356.5L594 350.5L599.5 345L606.5 340.5L606.5 334.5Z',
      available: false
    },
    {
      id: 'valencia',
      name: 'Comunidad Valenciana',
      path: 'M673.5 369.5L682 368L691 367.5L700 368L708.5 369.5L716.5 372L723.5 375.5L729.5 380L734.5 385.5L738 391.5L740 398L740.5 404.5L740 411L738 417L734.5 422.5L729.5 427L723.5 430.5L716.5 433L708.5 434.5L700 435L691 434.5L682 433L673.5 430.5L666.5 427L661 422.5L657 417L655 411L654.5 404.5L655 398L657 391.5L661 385.5L666.5 380L673.5 375.5L673.5 369.5Z',
      available: false
    },
    {
      id: 'murcia',
      name: 'Región de Murcia',
      path: 'M740.5 404.5L749 403L758 402.5L767 403L775.5 404.5L783.5 407L790.5 410.5L796.5 415L801.5 420.5L805 426.5L807 433L807.5 439.5L807 446L805 452L801.5 457.5L796.5 462L790.5 465.5L783.5 468L775.5 469.5L767 470L758 469.5L749 468L740.5 465.5L733.5 462L728 457.5L724 452L722 446L721.5 439.5L722 433L724 426.5L728 420.5L733.5 415L740.5 410.5L740.5 404.5Z',
      available: false
    },
    {
      id: 'andalucia',
      name: 'Andalucía',
      path: 'M807.5 439.5L816 438L825 437.5L834 438L842.5 439.5L850.5 442L857.5 445.5L863.5 450L868.5 455.5L872 461.5L874 468L874.5 474.5L874 481L872 487L868.5 492.5L863.5 497L857.5 500.5L850.5 503L842.5 504.5L834 505L825 504.5L816 503L807.5 500.5L800.5 497L795 492.5L791 487L789 481L788.5 474.5L789 468L791 461.5L795 455.5L800.5 450L807.5 445.5L807.5 439.5Z',
      available: false
    },
    {
      id: 'extremadura',
      name: 'Extremadura',
      path: 'M874.5 474.5L883 473L892 472.5L901 473L909.5 474.5L917.5 477L924.5 480.5L930.5 485L935.5 490.5L939 496.5L941 503L941.5 509.5L941 516L939 522L935.5 527.5L930.5 532L924.5 535.5L917.5 538L909.5 539.5L901 540L892 539.5L883 538L874.5 535.5L867.5 532L862 527.5L858 522L856 516L855.5 509.5L856 503L858 496.5L862 490.5L867.5 485L874.5 480.5L874.5 474.5Z',
      available: false
    },
    {
      id: 'baleares',
      name: 'Islas Baleares',
      path: 'M941.5 509.5L950 508L959 507.5L968 508L976.5 509.5L984.5 512L991.5 515.5L997.5 520L1002.5 525.5L1006 531.5L1008 538L1008.5 544.5L1008 551L1006 557L1002.5 562.5L997.5 567L991.5 570.5L984.5 573L976.5 574.5L968 575L959 574.5L950 573L941.5 570.5L934.5 567L929 562.5L925 557L923 551L922.5 544.5L923 538L925 531.5L929 525.5L934.5 520L941.5 515.5L941.5 509.5Z',
      available: false
    },
    {
      id: 'canarias',
      name: 'Islas Canarias',
      path: 'M1008.5 544.5L1017 543L1026 542.5L1035 543L1043.5 544.5L1051.5 547L1058.5 550.5L1064.5 555L1069.5 560.5L1073 566.5L1075 573L1075.5 579.5L1075 586L1073 592L1069.5 597.5L1064.5 602L1058.5 605.5L1051.5 608L1043.5 609.5L1035 610L1026 609.5L1017 608L1008.5 605.5L1001.5 602L996 597.5L992 592L990 586L989.5 579.5L990 573L992 566.5L996 560.5L1001.5 555L1008.5 550.5L1008.5 544.5Z',
      available: false
    }
  ]

  const handleRegionClick = (region: Region) => {
    if (region.available && region.url) {
      if (region.url.startsWith('http')) {
        window.location.href = region.url
      } else {
        router.push(region.url)
      }
    }
  }

  return (
    <div className="relative max-w-4xl mx-auto">
      {/* Tooltip */}
      {hoveredRegion && (
        <div 
          className="absolute z-10 bg-white px-3 py-1.5 rounded-lg shadow-lg text-sm transform -translate-x-1/2 -translate-y-full"
          style={{
            left: '50%',
            top: '0',
          }}
        >
          <span className={`font-medium ${hoveredRegion.available ? 'text-[#FFB800]' : 'text-gray-500'}`}>
            {hoveredRegion.name}
            {hoveredRegion.available ? ' (Disponible)' : ' (Próximamente)'}
          </span>
        </div>
      )}

      {/* SVG Map */}
      <svg 
        viewBox="0 0 1100 650" 
        fill="none" 
        xmlns="http://www.w3.org/2000/svg"
        className="w-full h-auto"
      >
        <g>
          {regions.map((region) => (
            <path
              key={region.id}
              d={region.path}
              fill={region.available ? '#FFB800' : '#D9D9D9'}
              stroke="#737373"
              strokeWidth="2"
              className={`transition-colors duration-200 ${
                region.available ? 'hover:fill-yellow-500 cursor-pointer' : 'hover:fill-gray-400'
              }`}
              onMouseEnter={() => setHoveredRegion(region)}
              onMouseLeave={() => setHoveredRegion(null)}
              onClick={() => handleRegionClick(region)}
            />
          ))}
        </g>
      </svg>
    </div>
  )
}